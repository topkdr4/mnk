<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Добавить страну</title>
    <link rel="stylesheet" href="css/md-components.css">
    <link rel="stylesheet" href="css/modal.css">
    <link href='http://fonts.googleapis.com/css?family=Roboto' rel='stylesheet' type='text/css'>
    <script src="js/jquery.js"></script>
    <style>
        body {
            background-color:           rgba(0, 0, 0, 0.6);
        }
    </style>
</head>
<body>

    <div class="modal_form">
        <div class="header">НОВАЯ СТРАНА</div>

        <div class="element">Название<input type="text" class="md-input-text country-name md-shadow"></div>
        <div class="element">Флаг

            <div class="md-combobox md-combobox-item-width">
                <div class="md-combobox-list md-combobox-item-width">
                    <div class="md-combobox-item" data-image="Armenia.png"></div>
                    <div class="md-combobox-item" data-image="Brazil.png"></div>
                </div>
                <div class="selector">

                </div>
            </div>
        </div>

        <div class="footer">
            <input type="button" value="Отмена"  class="md-button remove flat">
            <input type="button" value="Добавить" class="md-button">
        </div>
    </div>

    <script>

        $('.modal_form > *:not([class^="md-combo"])').on('click', function(e) {
            var child = $(this).find('.md-combobox-list:visible');
            if (child.length != 0)
                return;

            $('.md-combobox-list:visible').hide();
            var combobox = $('.md-combobox');
        });

        $('div.md-combobox').on('click', function(e) {
            $('.md-combobox-list').show();
        });

        $('.md-combobox-list').find('.md-combobox-item').each(function (item) {
            var attr = $(this).attr('data-image');
            $(this).css({
                'background' : 'url(' + attr + ') no-repeat center center',
                'background-size': 'contain'
            }).hover(function() {
                $(this).css({
                    'background-color' : '#F5F5F5'
                });
            }, function() {
                $(this).css({
                    'background-color' : '#FAFAFA'
                });
            }).on('click', function(e) {
                $('.md-combobox-list').fadeOut();
                $('div.md-combobox').attr({
                    'data-image' : attr
                }).css({
                    'background' : '#FAFAFA url(' + attr + ') no-repeat 30% center',
                    'background-size' : 'contain'
                });
            });
        });

    </script>

</body>
</html>
